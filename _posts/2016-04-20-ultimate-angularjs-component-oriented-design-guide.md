---
layout: post
title: Ultimate AngularJS Component Oriented Design Guide (in writing...)
author: Gautier Delorme
cover: /images/blog/2016-04-20-ultimate-angularjs-component-oriented-design-guide.png
---

# Table of content

<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [Table of content](#table-of-content)
- [Project architecture](#project-architecture)
	- [General](#general)
	- [App architecture](#app-architecture)
	- [Global app files](#global-app-files)
		- [app.js](#appjs)
		- [index.html](#indexhtml)
		- [index.ngdoc](#indexngdoc)
		- [style.scss](#stylescss)
	- [Components](#components)
		- [The component itself](#the-component-itself)
		- [The component's controller](#the-components-controller)
		- [The component's view](#the-components-view)
	- [Services](#services)
	- [Config](#config)
- [Routing](#routing)
	- [Routing by components](#routing-by-components)
- [Miscellaneous](#miscellaneous)
	- [Public project generation process](#public-project-generation-process)
	- [Javascript concepts](#javascript-concepts)
	- [Callback](#callback)
	- [Promise](#promise)
- [Documentation](#documentation)
	- [Write Documentation](#write-documentation)
	- [Build documentation](#build-documentation)

<!-- /TOC -->

# Project architecture

## General

```
├── webapp
│   ├── app/
│   │   └── ...
│   ├── docs/
│   │   └── ...
│   ├── node_modules/
│   │   └── ...
│   ├── public/
│   │   └── ...
│   ├── .gitignore
│   ├── gulpfile.js
│   ├── LICENSE
│   ├── package.json
│   └── README.md
```

- **app/** contains all AngularJS app files.
  - More details [in the next section](#app-architecture).

- **docs/** contains all documentation app files *[generated automatically with `npm start`]*.
  - This directory is generated by the `gulpfile.js` task called **ngdoc**.
  - Files in this directory are generated based on `@ngdoc comments` in `app/` files.

- **node_modules/** contains all NodeJS modules *[generated automatically with `npm install`]*.
  - Modules in this directory are installed based on the `package.json` dependencies.

- **public/** contains all finals documents to be rendered by the client browser *[generated automatically with `npm start`]*.
  - Files in this directory are generated by the `gulpfile.js` task called **browserify**.

More information about Gulp [in the Public project generation process section](#public-project-generation-process).

## App architecture

```
├── app
│   ├── components/
│   │   ├── component1/
│   │   │   ├── component1.js
│   │   │   ├── component1.html
│   │   │   └── Component1Ctrl.js
│   │   ├── component2/
│   │   │   ├── component2Sub/
│   │   │   │   ├── component2Sub.js
│   │   │   │   ├── component2Sub.html
│   │   │   │   └── Component2SubCtrl.js
│   │   │   ├── component2.js
│   │   │   └── Component2Ctrl.js
│   │   └── ...
│   ├── config/
│   │   ├── Config1.js
│   │   └── ...
│   ├── services/
│   │   ├── models/
│   │   │   ├── Model1.js
│   │   │   └── ...
│   │   ├── Service1.js
│   │   ├── Service2.js
│   │   └── ...
│   ├── app.js
│   ├── index.html
│   ├── index.ngdoc
│   └── style.scss
```

- **components/** contains all app components files.
- **config/** contains all app configuration files.
- **services/** contains all app services files.

## Global app files

*[TODO...]*

### app.js

*[TODO...]*

### index.html

*[TODO...]*

### index.ngdoc

*[TODO...]*

### style.scss

*[TODO...]*

## Components
An AngularJS component can be decomposed in three parts : a view, a controller and the component itself.

### The component itself
In AngularsJS a component is a simple object which can be declared like this:

```javascript
angular.module('app').component('xxComponentName', {
    // component properties and methods...
})
```

Then this component can be used in an html file like a classic html tag:

```html
<div>
  <!-- whatever html .... -->
  <xx-component-name></xx-component-name>
  <!-- whatever html ....-->
</div>
```

**/!\ NOTICE:** When you define your component be sure to add a prefix like the _xx_ to the name of your component to avoid having the same name than an existing html tag.

Some important component's properties:

- **controller**

To link the component with its controller

```js
angular.module('app').component('xxComponentName', {
    controller: 'ComponentNameCtrl'
    // other component properties and methods...
})
```

- **bindings**

To link component's html attributes to the controller. Input and output attributes are respectively declared with `<` and `&`. Inputs are used to pass data to the component from the parent component and output are used to transmit internal component event to the parent component.

If you have something like this:

```js
angular.module('app').component('xxComponentName', {
  bindings: {
      attrInput: '<', // You will have access to the attrInput property inside your controller
      attrOutput: '&' // You will have access to the attrOutput method inside your controller
  }
    // other component properties and methods...
})
```
You can then add corresponding attributes:

```html

<xx-component-name attrInput="$ctrl.something" attrOutput="$ctrl.onEvent()"></xx-component-name>

```
- **templateUrl**

The name of the html file corresponding to the component's view.

```js
angular.module('app').component('xxComponentName', {
  templateUrl: 'componentName.html'
    // other component properties and methods...
})
```

What if we want add some attributes to our component like a CSS class for example? Can we do it? YES! The solution is to inject `$element` into our templateUrl property and the add the class to the element (do not forget to return the name of the html template at the end).

```js
angular.module('app').component('xxComponentName', {
  templateUrl: ['$element', function($element) {
      angular.element($element).addClass('someCSSClass')
      return 'componentName.html'
  }]
    // other component properties and methods...
})
```

- **$canActivate**

`$canActivate` is a function called before the component is rendered to the user. It can be really useful to show a component only if a user is connected for example (by injecting the corresponding service in the function). This function must return a Promise, for more information about Promise see [the next section](#promise).

```js
angular.module('app').component('xxComponentName', {
  $canActivate: ['AuthService', function(AuthService) {
        return AuthService.requireAuth()
  }]
    // other component properties and methods...
})
```

- **$routeConfig**

We will see this property in details in the [Routing by components section](#routing-by-components).

So finally a complete component could look like that:

```js
angular.module('app').component('xxComponentName', {
  controller: 'ComponentNameCtrl',
  bindings: {
      attrInput: '<',
      attrOutput: '&'
  },
  templateUrl: ['$element', function($element) {
      angular.element($element).addClass('someCSSClass')
      return 'componentName.html'
  }],
  $canActivate: ['AuthService', function(AuthService) {
        return AuthService.requireAuth()
  }]
    // other component properties and methods...
})
```

There are more properties and methods available for a component so read the official [AngularJS documentation](https://docs.angularjs.org/guide/component).

### The component's controller

In AngularsJS a controller is a simple function which can be declared like this:

```javascript
angular.module('app').controller('ComponentNameCtrl', ComponentNameCtrl)

function ComponentNameCtrl() {
  var vm = this

  vm.someProperty = "Hey Gautch!"

  vm.someMethod = function() {
    console.log("I'm a method of ComponentNameCtrl and my single property is "+vm.someProperty)
  }

  // other properties and methods...
}

```

*[TODO...]*

### The component's view

*[TODO...]*

## Services

*[TODO...]*

## Config

*[TODO...]*

# Routing

*[TODO...]*

## Routing by components

*[TODO...]*

# Miscellaneous

*[TODO...]*

## Public project generation process

*[TODO...]*

## Javascript concepts

*[TODO...]*

## Callback

*[TODO...]*

## Promise

*[TODO...]*

# Documentation

*[TODO...]*

## Write Documentation

*[TODO...]*

## Build documentation

*[TODO...]*
